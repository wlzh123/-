#include<iostream>
#include<string>
using namespace std;
void Get_Next(string str,int next[]){
    next[0]=-1;
    next[1]=0;
    int cur=2;
    int cn=0;
    while(cur<str.size()){
        if(str[cur-1]==str[cn])
            next[cur++]=++cn;
        else if(cn>0)
            cn=next[cn];
        else
            next[cur++]=0;
    }
}
int Kmp(string s,string m){
  int next[m.size()]={0};

   Get_Next(m,next);
   int sp=0;
   int mp=0;
   while(sp<s.size()&&mp<m.size()){
        if(s[sp]==m[mp]){
            sp++;
            mp++;
        }
        else if(next[mp]==-1)
            sp++;
        else
            mp=next[mp];
   }
    return mp==m.size()?sp-mp:-1;
}
int main(){

    string s1="abcabcabcd";
    string m1="abc";
    int CN=Kmp(s1,m1);
    cout<<CN;

    return 0;
}
